<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<body>
<div th:fragment="menu(userList, userId)">
    <div class="col-auto p-0 d-none d-md-block" style="min-width: 280px; max-width: 300px;">
        <div class="card shadow-sm h-100">
            <div class="card-header" style="background: #ffffff; color: #1f2230; border-bottom: 1px solid #e5e7eb;">
                <h6 class="mb-0"><i class="fas fa-users mr-2"></i>Пользователи</h6>
            </div>
            <div class="card-body p-0">
                <ul class="list-group list-group-flush" style="max-height: calc(100vh - 200px); overflow: hidden; border-radius: 10px;">
                    <li class="list-group-item"
                        th:style="${userId == -1} ? 'background: #fc042b; border: 1px solid #fc042b; color: #ffffff;' : 'background: #ffffff; color: #1f2230; border: 1px solid #eaecef;'">
                        <a th:href="@{/task/tasklist(user_id=-1,page=1)}"
                           class="text-decoration-none d-flex justify-content-between align-items-center py-2 px-1 rounded"
                           th:classappend="${userId == -1} ? 'text-white' : ''"
                           style="transition: all 0.2s ease; width: 100%;">
                            <span class="font-weight-medium"><i class="fas fa-home mr-2"></i>Свои задачи</span>
                        </a>
                    </li>

                    <th:block th:each="user : ${userList}">
                        <li class="list-group-item border-0"
                            th:style="${user.id == userId} ? 'background: #fc042b; border: 1px solid #fc042b; color: #ffffff;' : 'background: #ffffff; color: #1f2230; border: 1px solid #eaecef;'">
                            <a th:href="@{/task/tasklist(user_id=${user.id},page=1)}"
                               class="text-decoration-none d-flex justify-content-between align-items-center py-2 px-1 rounded"
                               th:classappend="${user.id == userId} ? 'text-white' : ''"
                               style="transition: all 0.2s ease; width: 100%;">
                                <span th:text="${user.fullName}" class="font-weight-medium">Пользователь</span>
                                <span th:classappend="${user.id == userId} ? 'badge badge-light' : 'badge badge-secondary'"
                                      th:style="${user.id == userId} ? 'background: #ffffff; color: #fc042b;' : 'background: #e5e7eb; color: #1f2230;'"
                                      class="badge-pill" th:text="${user.numActiveTask}">0</span>
                            </a>
                        </li>
                    </th:block>
                </ul>

                <div th:if="${#lists.isEmpty(userList)}" class="text-center text-muted py-4">
                    <i class="fas fa-users fa-2x mb-2"></i>
                    <p>Список пользователей пуст</p>
                </div>
            </div>
        </div>
    </div>
</div>
</body>
</html>
